{
  "name": "GHL ‚Üí ClickUp Client Onboarding (Production Ready)",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ghl-client-onboarding",
        "responseMode": "onReceived",
        "responseData": "firstEntryJson",
        "options": {
          "noResponseBody": false
        }
      },
      "id": "webhook-ghl-trigger",
      "name": "GHL Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [200, 300],
      "webhookId": "ghl-client-webhook"
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "clientName",
              "value": "={{ $json.contact && $json.contact.name || $json.name || $json.client_name || 'UNKNOWN CLIENT' }}"
            },
            {
              "name": "clientEmail", 
              "value": "={{ $json.contact && $json.contact.email || $json.email || '' }}"
            },
            {
              "name": "clientPhone",
              "value": "={{ $json.contact && $json.contact.phone || $json.phone || '' }}"
            },
            {
              "name": "subAccountId",
              "value": "={{ $json.locationId || $json.sub_account_id || '' }}"
            },
            {
              "name": "ein",
              "value": "={{ $json.ein || $json.business_ein || '' }}"
            },
            {
              "name": "supportEmail",
              "value": "={{ $json.support_email || $json.business_email || '' }}"
            },
            {
              "name": "projectType",
              "value": "={{ $json.tags && $json.tags.includes('premium') ? 'Premium' : 'Standard' }}"
            },
            {
              "name": "timestamp",
              "value": "={{ new Date().toISOString() }}"
            },
            {
              "name": "spaceId",
              "value": "90140073497"
            },
            {
              "name": "teamId", 
              "value": "90140073497"
            },
            {
              "name": "assigneeId",
              "value": "88411788"
            }
          ]
        },
        "options": {}
      },
      "id": "set-client-data",
      "name": "Set Client Data",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [400, 300]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "condition-1",
              "leftValue": "={{ $json.clientName }}",
              "rightValue": "UNKNOWN CLIENT",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            },
            {
              "id": "condition-2", 
              "leftValue": "={{ $json.clientName }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "if-valid-client",
      "name": "IF - Valid Client Data",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [600, 300]
    },
    {
      "parameters": {
        "authentication": "accessToken",
        "resource": "list",
        "operation": "create",
        "team": "={{ $json.teamId }}",
        "space": "={{ $json.spaceId }}",
        "folderless": true,
        "name": "üèóÔ∏è {{ $json.clientName }} - GHL Onboarding",
        "content": "Complete GoHighLevel sub-account setup following the 16-step onboarding process for {{ $json.clientName }}. Project Type: {{ $json.projectType }}",
        "priority": true,
        "assignee": "={{ $json.assigneeId }}",
        "status": "red"
      },
      "id": "create-main-list",
      "name": "Create Main Project List",
      "type": "n8n-nodes-base.clickUp",
      "typeVersion": 1,
      "position": [800, 200]
    },
    {
      "parameters": {
        "jsCode": "// Get client data from previous node\nconst clientData = $input.first().json;\n\n// Define all 16 tasks with detailed content from PDF\nconst tasks = [\n  {\n    id: 1,\n    name: \"1Ô∏è‚É£ INTEGRATIONS\",\n    priority: \"urgent\",\n    estimatedHours: 16,\n    content: `**üîó INTEGRATIONS SETUP**\n\n**Client:** ${clientData.clientName}\n**Project:** GHL Sub-Account Onboarding\n**Estimated Time:** 2 days (16 hours)\n\n**TASKS TO COMPLETE:**\n‚òê Google Business Profile Integration\n‚òê Facebook Ads Integration\n‚òê Google Ads Integration  \n‚òê QuickBooks Integration\n‚òê Payment Process Setup\n‚òê 3rd Party Apps Integration\n\n**NOTES:**\n‚Ä¢ Complete all integrations in this exact order for optimal setup\n‚Ä¢ Test each integration after setup\n‚Ä¢ Document any API keys or credentials used\n\n**SUCCESS CRITERIA:**\n‚úÖ All integrations active and tested\n‚úÖ Data flowing correctly between systems\n‚úÖ Client has access to all connected platforms\n\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 2,\n    name: \"2Ô∏è‚É£ WEBSITE\",\n    priority: \"high\", \n    estimatedHours: 24,\n    content: `**üåê WEBSITE FOUNDATION SETUP**\n\n**Client:** ${clientData.clientName}\n**Project:** GHL Sub-Account Onboarding\n**Estimated Time:** 3 days (24 hours)\n\n**TASKS TO COMPLETE:**\n‚òê Landing page creation\n‚òê Standard terms and conditions page\n‚òê Standard privacy policy page\n‚òê Domain setup using Domain Connect feature\n\n**RESOURCES:**\nüìö [Domain Connect Guide](https://help.gohighlevel.com/support/solutions/articles/155000000734-how-to-use-the-domain-connect-feature-)\n\n**SUCCESS CRITERIA:**\n‚úÖ Professional landing page live\n‚úÖ Legal pages properly linked\n‚úÖ Domain connected and SSL active\n‚úÖ Mobile responsive design verified\n\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 3,\n    name: \"3Ô∏è‚É£ PHONE SYSTEM\",\n    priority: \"urgent\",\n    estimatedHours: 24,\n    content: `**üìû PHONE SYSTEM & A2P REGISTRATION**\n\n**Client:** ${clientData.clientName}\n**Project:** GHL Sub-Account Onboarding\n**Estimated Time:** 3 days (24 hours)\n\n**‚ö†Ô∏è CRITICAL REQUIREMENTS:**\n**Client EIN:** ${clientData.ein || 'üö® COLLECT FROM CLIENT IMMEDIATELY'}\n**Support Email:** ${clientData.supportEmail || 'üö® COLLECT FROM CLIENT IMMEDIATELY'}\n\n**TASKS TO COMPLETE:**\n‚òê Collect EIN from client (REQUIRED)\n‚òê Collect/verify support email (REQUIRED)\n‚òê Complete A2P registration process\n‚òê Reference A2P 10DLC Brand Approval Best Practices\n‚òê Configure phone number routing\n‚òê Test SMS capabilities\n\n**CRITICAL NOTES:**\nüö® A2P registration MUST be completed before any SMS campaigns\nüö® EIN and support email are MANDATORY for approval\nüö® This step blocks SMS functionality if incomplete\n\n**RESOURCES:**\nüìö [A2P 10DLC Best Practices](https://help.gohighlevel.com/support/solutions/articles/155000000508-a2p-10dlc-brand-approval-best-practices)\n\n**SUCCESS CRITERIA:**\n‚úÖ A2P registration approved\n‚úÖ SMS sending capability active\n‚úÖ Phone routing configured\n\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 4,\n    name: \"4Ô∏è‚É£ PIPELINES\",\n    priority: \"high\",\n    estimatedHours: 16,\n    content: `**üèóÔ∏è PIPELINE CONFIGURATION**\n\n**Client:** ${clientData.clientName}\n**Project:** GHL Sub-Account Onboarding\n**Estimated Time:** 2 days (16 hours)\n\n**‚ö†Ô∏è IMPORTANT:** PRESENT EXACT PIPELINES TO CLIENT AND GET THEIR FEEDBACK ON ANY DIFFERENCES\n\n**PIPELINES TO CONFIGURE:**\n\n**1. SALES PIPELINE:**\n‚òê New Lead ‚Üí Pending Designer Acceptance ‚Üí Assigned Lead ‚Üí On-Site Estimate Scheduled ‚Üí Need To Send Proposal ‚Üí Proposal Sent ‚Üí Proposal Accepted ‚Üí Deposit Paid\n\n**2. MASTER PLAN PIPELINE:**\n‚òê Build/Edit Master Plan ‚Üí Designer Review ‚Üí Ready For Shakedown ‚Üí PSD Revisions Needed ‚Üí Master Plan Completed ‚Üí Drop/Cancelled Project\n\n**3. ACTIVE JOB PIPELINE:**\n‚òê Book Pre-CW ‚Üí Pre-CW Booked ‚Üí Change Order Needed ‚Üí Active Job ‚Üí Book Post-CW ‚Üí Post-CW Booked ‚Üí Address Punch List ‚Üí Awaiting Final Payment ‚Üí Job Closed ‚Üí Dropped/Cancelled Project\n\n**4. CHANGE ORDER PIPELINE:**\n‚òê New Change Order Request ‚Üí Change Order Sent ‚Üí Change Order Paid + Closed ‚Üí Change Order Cancelled\n\n**5. REVIEW PIPELINE:**\n‚òê Review Requested ‚Üí Left Review ‚Üí Stale Review Request ‚Üí DO NOT ASK FOR REVIEW\n\n**6. REFERRAL PIPELINE:**\n‚òê Referral Requested ‚Üí Referral Shared ‚Üí Stale Referral Request ‚Üí DO NOT ASK FOR REFERRAL\n\n**CLIENT APPROVAL REQUIRED:**\nüéØ Schedule pipeline review meeting with client\nüéØ Present exact pipeline structure\nüéØ Document any requested changes\nüéØ Get written approval before implementation\n\n**SUCCESS CRITERIA:**\n‚úÖ All pipelines configured exactly as specified\n‚úÖ Client has reviewed and approved pipeline structure\n‚úÖ Pipeline automation triggers set up\n\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  }\n];\n\n// Continue with remaining 12 tasks...\nconst remainingTasks = [\n  {\n    id: 5,\n    name: \"5Ô∏è‚É£ CUSTOM FIELD FOLDERS\",\n    priority: \"normal\",\n    estimatedHours: 8,\n    content: `**üìÅ CUSTOM FIELD FOLDERS SETUP**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 1 day (8 hours)\\n\\n**FOLDERS TO CREATE:**\\n‚òê New Project Questionnaire (Intake)\\n‚òê Qualification Questionnaire\\n‚òê On-Site Consultation Questionnaire\\n‚òê Design Questionnaire\\n‚òê Pre-CW Questionnaire\\n‚òê Post-CW Questionnaire\\n\\n**SUCCESS CRITERIA:**\\n‚úÖ All custom field folders created\\n‚úÖ Proper data validation in place\\n‚úÖ Integration with contact records working\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 6,\n    name: \"6Ô∏è‚É£ CUSTOM VALUE FOLDERS\",\n    priority: \"normal\",\n    estimatedHours: 8,\n    content: `**üìÇ CUSTOM VALUE FOLDERS SETUP**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 1 day (8 hours)\\n\\n**FOLDERS TO CREATE:**\\n‚òê Calendar Links folder\\n‚òê Form/Survey Links folder\\n\\n**SUCCESS CRITERIA:**\\n‚úÖ Both custom value folders created\\n‚úÖ Logical organization structure implemented\\n‚úÖ Easy access for team members\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 7,\n    name: \"7Ô∏è‚É£ FORMS/SURVEYS\",\n    priority: \"normal\",\n    estimatedHours: 16,\n    content: `**üìã FORMS & SURVEYS CREATION**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 2 days (16 hours)\\n\\n**‚ö†Ô∏è IMPORTANT:** Qualification forms must be based on CLIENT'S SPECIFIC qualification process\\n\\n**FORMS TO CREATE:**\\n‚òê Calendar forms (for booking appointments)\\n‚òê Qualification forms (**CUSTOMIZE based on client's specific qualification process**)\\n‚òê On-Site Consultation (1st Appointment Form)\\n‚òê Shakedown/Project Prep Meeting form\\n‚òê Pre-Construction Walkthrough form\\n‚òê Post-Construction Walkthrough form\\n‚òê Project Photoshoot Checklist form\\n\\n**SUCCESS CRITERIA:**\\n‚úÖ All forms created and tested\\n‚úÖ Qualification forms match client's process exactly\\n‚úÖ Forms integrate properly with contact records\\n‚úÖ Auto-responses configured\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 8,\n    name: \"8Ô∏è‚É£ CUSTOM VALUES + TRIGGER LINKS\",\n    priority: \"normal\",\n    estimatedHours: 8,\n    content: `**üîó CUSTOM VALUES & TRIGGER LINKS**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 1 day (8 hours)\\n\\n**LINK FORMAT:** ?contact_id={{contact.id}}\\n\\n**TASKS TO COMPLETE:**\\n‚òê Convert all survey forms to custom value format\\n‚òê Add trigger links with contact ID parameter\\n‚òê Test trigger link functionality\\n‚òê Create documentation for team on how to use links\\n‚òê Set up automation triggers for survey responses\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 9,\n    name: \"9Ô∏è‚É£ ADD USERS\",\n    priority: \"urgent\",\n    estimatedHours: 8,\n    dependency: \"MUST_COMPLETE_BEFORE_CALENDARS\",\n    content: `**üë• ADD USERS TO SUB-ACCOUNT**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 1 day (8 hours)\\n\\n**‚ö†Ô∏è CRITICAL DEPENDENCY:** Users MUST be added BEFORE creating calendars (Step 10)\\n\\n**REQUIREMENTS:**\\nüö® COLLECT ALL USER CONTACTS + PHONE + EMAIL from client\\n\\n**TASKS TO COMPLETE:**\\n‚òê Add owner to sub-account\\n‚òê Collect complete user list from client\\n‚òê Add all users to sub-account with proper permissions\\n‚òê Verify each user can access their account\\n‚òê Set up user roles and permissions\\n‚òê Send welcome emails to all users\\n\\n**‚ö†Ô∏è CRITICAL:** Do NOT proceed to Step 10 (Calendars) until ALL users are added\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 10,\n    name: \"üîü CALENDARS\",\n    priority: \"urgent\",\n    estimatedHours: 16,\n    dependency: \"REQUIRES_STEP_9_COMPLETE\",\n    content: `**üìÖ SERVICE CALENDARS SETUP**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 2 days (16 hours)\\n\\n**‚ö†Ô∏è DEPENDENCY CHECK:** Verify Step 9 (Add Users) is COMPLETE before starting\\n\\n**CALENDAR GROUPS TO CREATE:**\\n\\n**1. CONSULTATION CALENDAR GROUP**\\n‚òê On-Site Consultation (Light Blue)\\n‚òê On-Site Project Presentation (Dark Green)\\n\\n**2. CONSTRUCTION CALENDARS GROUP**\\n‚òê Pre-Construction Walkthrough (Dark Red)\\n‚òê Post-Construction Walkthrough (Purple)\\n‚òê Project Photoshoot (Dark Blue)\\n\\n**SUCCESS CRITERIA:**\\n‚úÖ All calendar groups created with proper colors\\n‚úÖ Service calendars configured and tested\\n‚úÖ Booking workflows functioning\\n‚úÖ Team trained on calendar usage\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 11,\n    name: \"1Ô∏è‚É£1Ô∏è‚É£ ESTIMATE & INVOICE SETTINGS\",\n    priority: \"normal\",\n    estimatedHours: 8,\n    content: `**üí≥ PAYMENT PROCESSING SETUP**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 1 day (8 hours)\\n\\n**TASKS TO COMPLETE:**\\n‚òê Setup Stripe account (if needed)\\n‚òê Connect payment processor to GHL\\n‚òê Turn auto invoice generation ON\\n‚òê Configure payment terms and methods\\n‚òê Set up automated payment reminders\\n‚òê Test payment processing workflow\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 12,\n    name: \"1Ô∏è‚É£2Ô∏è‚É£ AUTOMATIONS + TAG SETUP\",\n    priority: \"urgent\",\n    estimatedHours: 24,\n    content: `**ü§ñ AUTOMATION WORKFLOWS & TAGGING**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 3 days (24 hours)\\n\\n**AUTOMATION WORKFLOWS TO BUILD:**\\n\\n**1. SALES AUTOMATIONS**\\n‚òê Lead capture and assignment\\n‚òê Follow-up sequences\\n‚òê Proposal delivery automation\\n‚òê Deposit payment workflows\\n\\n**4. REVIEW MANAGEMENT**\\n‚òê Review request automation\\n‚òê Review follow-up sequences\\n‚òê **Schedule Review Post in Social Planner**\\n‚òê Review response management\\n\\nüéØ **CRITICAL:** Schedule Review Post in Social Planner for each completed project\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 13,\n    name: \"1Ô∏è‚É£3Ô∏è‚É£ DASHBOARDS\",\n    priority: \"normal\",\n    estimatedHours: 16,\n    content: `**üìä SALES DASHBOARD CREATION**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 2 days (16 hours)\\n\\n**DASHBOARD LAYOUT (Exact Row Configuration):**\\n\\n**ROW 1: CORE METRICS**\\n‚òê Opportunity Status widget\\n‚òê Value tracking widget\\n‚òê Conversion Rate widget\\n\\n**ROW 2: SALES FUNNEL**\\n‚òê Sales Funnel visualization\\n‚òê Pipeline progression tracking\\n\\n**ROW 3: LEAD SOURCES**\\n‚òê Lead Source Report\\n‚òê Source performance analytics\\n\\n**ROW 4: GOOGLE BUSINESS PROFILE**\\n‚òê GBP performance metrics\\n‚òê Review tracking\\n‚òê Local search visibility\\n\\n**ROW 5: ADVERTISING PERFORMANCE**\\n‚òê Facebook Ads reporting\\n‚òê PPC (Google Ads) reporting\\n‚òê Campaign performance metrics\\n\\n**ROW 6: SALES EFFICIENCY**\\n‚òê Sales team performance\\n‚òê Close rate analytics\\n‚òê Revenue per lead metrics\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 14,\n    name: \"1Ô∏è‚É£4Ô∏è‚É£ CUSTOM REPORTS\",\n    priority: \"low\",\n    estimatedHours: 8,\n    content: `**üìà CUSTOM REPORTING SYSTEM**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 1 day (8 hours)\\n\\n**CUSTOM REPORTS TO CREATE:**\\n‚òê Monthly performance summary\\n‚òê Pipeline conversion analysis\\n‚òê Lead source ROI report\\n‚òê Team productivity report\\n‚òê Customer satisfaction metrics\\n‚òê Revenue forecasting report\\n\\n**RESOURCES:**\\nüìö **Reference:** How to create and schedule reports (GHL Help Center)\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 15,\n    name: \"1Ô∏è‚É£5Ô∏è‚É£ DOMAIN SETUP\",\n    priority: \"normal\",\n    estimatedHours: 8,\n    content: `**üåê DOMAIN CONNECTION & SETUP**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 1 day (8 hours)\\n\\n**DOMAIN OPTIONS:**\\n\\n**OPTION 1: CONNECT EXISTING DOMAIN**\\n‚òê Verify domain ownership\\n‚òê Configure DNS settings\\n‚òê Set up CNAME records\\n‚òê Verify SSL certificate\\n‚òê Test domain connection\\n\\n**OPTION 2: BUY NEW DOMAIN**\\n‚òê Research and select domain name\\n‚òê Purchase through GHL or external registrar\\n‚òê Configure domain settings\\n‚òê Set up DNS management\\n‚òê Install SSL certificate\\n\\n**RESOURCES:**\\nüìö **Reference:** [Domain Connect Feature Guide](https://help.gohighlevel.com/support/solutions/articles/155000000734-how-to-use-the-domain-connect-feature-)\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  },\n  {\n    id: 16,\n    name: \"1Ô∏è‚É£6Ô∏è‚É£ EMAIL SYSTEM\",\n    priority: \"urgent\",\n    estimatedHours: 16,\n    content: `**üìß EMAIL INFRASTRUCTURE SETUP**\\n\\n**Client:** ${clientData.clientName}\\n**Project:** GHL Sub-Account Onboarding\\n**Estimated Time:** 2 days (16 hours)\\n\\n**EMAIL SYSTEM COMPONENTS:**\\n\\n**1. G SUITE SETUP**\\n‚òê Create G Suite/Google Workspace account\\n‚òê Configure custom email addresses\\n‚òê Set up user accounts and permissions\\n‚òê Configure email forwarding and aliases\\n‚òê Set up mobile email access\\n\\n**2. DEDICATED SUBDOMAIN SETUP**\\n‚òê Create dedicated sending subdomain\\n‚òê Configure DNS records for email authentication\\n‚òê Set up SPF records\\n‚òê Configure DKIM signing\\n‚òê Implement DMARC policy\\n\\n**RESOURCES:**\\nüìö **Reference:** [How to Set Up a Dedicated Sending Domain](https://help.gohighlevel.com/support/solutions/articles/155000001051-how-to-set-up-a-dedicated-sending-domain)\\n\\n**SUCCESS CRITERIA:**\\n‚úÖ G Suite/Google Workspace fully configured\\n‚úÖ Dedicated subdomain properly set up\\n‚úÖ Email authentication (SPF/DKIM/DMARC) configured\\n‚úÖ Email deliverability optimized and tested\\n‚úÖ All email workflows functioning properly\\n\\nüí° **Remember:** \"When in doubt, map it out. Follow this document order for fewest interruptions.\"`\n  }\n];\n\n// Combine all tasks\nconst allTasks = tasks.concat(remainingTasks);\n\n// Return all tasks for processing\nreturn allTasks.map(task => ({\n  json: {\n    ...task,\n    clientData,\n    spaceId: clientData.spaceId,\n    teamId: clientData.teamId,\n    assigneeId: clientData.assigneeId\n  }\n}));"
      },
      "id": "prepare-task-data",
      "name": "Prepare All 16 Tasks",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [600, 500]
    },
    {
      "parameters": {
        "batchSize": 1,
        "options": {}
      },
      "id": "split-into-batches",
      "name": "Split Into Batches",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [800, 500]
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonData": "{ \"milliseconds\": 2000 }",
        "options": {}
      },
      "id": "delay-between-tasks",
      "name": "Delay Between Tasks",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [900, 500]
    },
    {
      "parameters": {
        "authentication": "accessToken",
        "resource": "task",
        "operation": "create",
        "team": "={{ $json.teamId }}",
        "space": "={{ $json.spaceId }}",
        "folderless": true,
        "list": "={{ $('Create Main Project List').item.json.id }}",
        "name": "={{ $json.name }}",
        "content": "={{ $json.content }}",
        "status": "to do",
        "priority": "={{ $json.priority === 'urgent' ? '1' : $json.priority === 'high' ? '2' : $json.priority === 'normal' ? '3' : '4' }}",
        "assignees": [
          "={{ $json.assigneeId }}"
        ],
        "tags": [
          "ghl-onboarding",
          "={{ $json.clientData.projectType.toLowerCase() }}"
        ],
        "timeEstimate": "={{ $json.estimatedHours * 60 * 60 * 1000 }}"
      },
      "id": "create-individual-task",
      "name": "Create Individual Task",
      "type": "n8n-nodes-base.clickUp",
      "typeVersion": 1,
      "position": [1000, 500],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "missing-ein",
              "leftValue": "={{ $('Set Client Data').item.json.ein }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "check-critical-data",
      "name": "Check Critical Data Missing",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [1200, 400]
    },
    {
      "parameters": {
        "subject": "üö® CRITICAL DATA MISSING - GHL Onboarding for {{ $('Set Client Data').item.json.clientName }}",
        "message": "URGENT: Missing critical information for client onboarding\\n\\nClient: {{ $('Set Client Data').item.json.clientName }}\\nEmail: {{ $('Set Client Data').item.json.clientEmail }}\\nPhone: {{ $('Set Client Data').item.json.clientPhone }}\\n\\nMISSING CRITICAL DATA:\\n{{ $('Set Client Data').item.json.ein ? '' : '‚ùå EIN (Required for A2P registration)' }}\\n{{ $('Set Client Data').item.json.supportEmail ? '' : '‚ùå Support Email (Required for A2P registration)' }}\\n\\nACTION REQUIRED:\\nPlease collect this information immediately and update the ClickUp project:\\n{{ $('Create Main Project List').item.json.url }}\\n\\nWithout this information, SMS capabilities cannot be activated.",
        "options": {}
      },
      "id": "send-critical-alert",
      "name": "Send Critical Data Alert",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [1400, 300],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "subject": "‚úÖ GHL Onboarding Project Created - {{ $('Set Client Data').item.json.clientName }}",
        "message": "SUCCESS: GHL onboarding project has been created!\\n\\nClient: {{ $('Set Client Data').item.json.clientName }}\\nProject Type: {{ $('Set Client Data').item.json.projectType }}\\nTotal Tasks: 16\\n\\nClickUp Project: {{ $('Create Main Project List').item.json.url }}\\n\\nNEXT STEPS:\\n1. Review all 16 tasks in ClickUp\\n2. Assign team members as needed  \\n3. Begin with Step 1 (Integrations)\\n4. Follow the exact order for optimal results\\n\\n{{ $('Set Client Data').item.json.ein ? '' : '‚ö†Ô∏è Remember to collect EIN for A2P registration' }}\\n{{ $('Set Client Data').item.json.supportEmail ? '' : '‚ö†Ô∏è Remember to collect support email for A2P registration' }}\\n\\nThe project follows the complete 16-step onboarding process with detailed checklists and instructions.",
        "options": {}
      },
      "id": "send-success-notification",
      "name": "Send Success Notification",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [1400, 500],
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "subject": "‚ùå GHL Onboarding Failed - Invalid Client Data",
        "message": "ERROR: Cannot create GHL onboarding project due to invalid client data.\\n\\nReceived Data:\\nClient Name: {{ $('Set Client Data').item.json.clientName }}\\nEmail: {{ $('Set Client Data').item.json.clientEmail }}\\nPhone: {{ $('Set Client Data').item.json.clientPhone }}\\nSub-Account ID: {{ $('Set Client Data').item.json.subAccountId }}\\n\\nERROR: Client name is missing or invalid.\\n\\nPlease check the webhook data and try again.",
        "options": {}
      },
      "id": "send-error-notification",
      "name": "Send Error Notification", 
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [800, 100],
      "onError": "continueRegularOutput"
    }
  ],
  "connections": {
    "GHL Webhook": {
      "main": [
        [
          {
            "node": "Set Client Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Client Data": {
      "main": [
        [
          {
            "node": "IF - Valid Client Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF - Valid Client Data": {
      "main": [
        [
          {
            "node": "Create Main Project List",
            "type": "main",
            "index": 0
          },
          {
            "node": "Prepare All 16 Tasks",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Error Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Main Project List": {
      "main": [
        [
          {
            "node": "Check Critical Data Missing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare All 16 Tasks": {
      "main": [
        [
          {
            "node": "Split Into Batches",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Into Batches": {
      "main": [
        [
          {
            "node": "Delay Between Tasks",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delay Between Tasks": {
      "main": [
        [
          {
            "node": "Create Individual Task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Individual Task": {
      "main": [
        [
          {
            "node": "Send Success Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Critical Data Missing": {
      "main": [
        [
          {
            "node": "Send Critical Data Alert",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    }
  },
  "pinData": {},
  "settings": {
    "errorWorkflow": {
      "isActive": false
    },
    "timezone": "America/New_York",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner", 
    "executionOrder": "v1"
  },
  "staticData": {},
  "tags": [
    "ghl",
    "clickup", 
    "automation",
    "onboarding",
    "production"
  ],
  "triggerCount": 0,
  "updatedAt": "2025-08-08T19:46:27.000Z",
  "versionId": "3"
}